@{
    ViewData["Title"] = "خانه";
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">
                    خوش آمدید به فروشگاه آنلاین
                </h1>
                <p class="lead mb-4">
                    بهترین محصولات با کیفیت‌ترین خدمات در دسترس شما
                </p>
                <a href="@Url.Action("Index", "Product")" class="btn btn-light btn-lg">
                    مشاهده محصولات
                    <i class="fas fa-arrow-left ms-2"></i>
                </a>
            </div>
            <div class="col-lg-6">
                <img src="~/images/hero-banner.jpg" alt="Hero Banner" class="img-fluid rounded" style="max-height: 400px; object-fit: cover;">
            </div>
        </div>
    </div>
</section>

<!-- Featured Categories -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2 class="text-center mb-5">دسته‌بندی‌های محبوب</h2>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card category-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-mobile-alt fa-3x text-primary mb-3"></i>
                        <h5 class="card-title">موبایل و تبلت</h5>
                        <p class="card-text">جدیدترین گوشی‌ها و تبلت‌ها</p>
                        <a href="@Url.Action("Category", "Product", new { id = 1 })" class="btn btn-primary">
                            مشاهده محصولات
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card category-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-laptop fa-3x text-success mb-3"></i>
                        <h5 class="card-title">لپ‌تاپ و کامپیوتر</h5>
                        <p class="card-text">لپ‌تاپ‌ها و کامپیوترهای قدرتمند</p>
                        <a href="@Url.Action("Category", "Product", new { id = 2 })" class="btn btn-success">
                            مشاهده محصولات
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card category-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-headphones fa-3x text-warning mb-3"></i>
                        <h5 class="card-title">صوتی و تصویری</h5>
                        <p class="card-text">هدفون، اسپیکر و تجهیزات صوتی</p>
                        <a href="@Url.Action("Category", "Product", new { id = 3 })" class="btn btn-warning">
                            مشاهده محصولات
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2 class="text-center mb-5">محصولات ویژه</h2>
            </div>
        </div>
        <div class="row g-4" id="featured-products">
            <!-- Featured products will be loaded here -->
            <div class="col-12 text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">در حال بارگذاری...</span>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-12 text-center">
                <a href="@Url.Action("Featured", "Product")" class="btn btn-primary btn-lg">
                    مشاهده همه محصولات ویژه
                    <i class="fas fa-arrow-left ms-2"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- On Sale Products -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2 class="text-center mb-5">محصولات تخفیف‌دار</h2>
            </div>
        </div>
        <div class="row g-4" id="sale-products">
            <!-- Sale products will be loaded here -->
            <div class="col-12 text-center">
                <div class="spinner-border text-danger" role="status">
                    <span class="visually-hidden">در حال بارگذاری...</span>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-12 text-center">
                <a href="@Url.Action("OnSale", "Product")" class="btn btn-danger btn-lg">
                    مشاهده همه تخفیف‌ها
                    <i class="fas fa-arrow-left ms-2"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-3 text-center">
                <i class="fas fa-shipping-fast fa-3x mb-3"></i>
                <h5>ارسال سریع</h5>
                <p>ارسال رایگان برای خریدهای بالای ۵۰۰ هزار تومان</p>
            </div>
            <div class="col-md-3 text-center">
                <i class="fas fa-shield-alt fa-3x mb-3"></i>
                <h5>ضمانت اصالت</h5>
                <p>تضمین اصالت و کیفیت تمام محصولات</p>
            </div>
            <div class="col-md-3 text-center">
                <i class="fas fa-headset fa-3x mb-3"></i>
                <h5>پشتیبانی ۲۴/۷</h5>
                <p>پشتیبانی آنلاین در تمام ساعات شبانه‌روز</p>
            </div>
            <div class="col-md-3 text-center">
                <i class="fas fa-undo fa-3x mb-3"></i>
                <h5>ضمانت بازگشت</h5>
                <p>امکان بازگشت محصول تا ۷ روز پس از خرید</p>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // Load featured products
        fetch('@Url.Action("Featured", "Product")')
            .then(response => response.text())
            .then(html => {
                // Parse the HTML and extract product cards
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const products = doc.querySelectorAll('.product-card');
                
                const container = document.getElementById('featured-products');
                container.innerHTML = '';
                
                // Show only first 4 products
                for (let i = 0; i < Math.min(4, products.length); i++) {
                    const col = document.createElement('div');
                    col.className = 'col-lg-3 col-md-6';
                    col.appendChild(products[i]);
                    container.appendChild(col);
                }
                
                if (products.length === 0) {
                    container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">هیچ محصول ویژه‌ای یافت نشد</p></div>';
                }
            })
            .catch(error => {
                console.error('Error loading featured products:', error);
                document.getElementById('featured-products').innerHTML = '<div class="col-12 text-center"><p class="text-muted">خطا در بارگذاری محصولات</p></div>';
            });
            
        // Load sale products
        fetch('@Url.Action("OnSale", "Product")')
            .then(response => response.text())
            .then(html => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const products = doc.querySelectorAll('.product-card');
                
                const container = document.getElementById('sale-products');
                container.innerHTML = '';
                
                // Show only first 4 products
                for (let i = 0; i < Math.min(4, products.length); i++) {
                    const col = document.createElement('div');
                    col.className = 'col-lg-3 col-md-6';
                    col.appendChild(products[i]);
                    container.appendChild(col);
                }
                
                if (products.length === 0) {
                    container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">هیچ محصول تخفیف‌داری یافت نشد</p></div>';
                }
            })
            .catch(error => {
                console.error('Error loading sale products:', error);
                document.getElementById('sale-products').innerHTML = '<div class="col-12 text-center"><p class="text-muted">خطا در بارگذاری محصولات</p></div>';
            });
    </script>
}